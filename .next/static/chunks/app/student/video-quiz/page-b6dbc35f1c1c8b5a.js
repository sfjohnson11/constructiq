(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{6661:function(e,t,i){Promise.resolve().then(i.bind(i,1698))},1698:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return StudentVideoQuizPage}});var l=i(7437),s=i(2265),a=i(4033),n=i(2445),r=i(4997);function StudentVideoQuizPage(){let e=(0,a.useSearchParams)(),t=e.get("quizId"),[i,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[d,x]=(0,s.useState)([]),[f,m]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),[b,_]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){if(!t)return;let{data:e,error:i}=await n.Z.from("electrical_quizzes").select("*, plan_set_id").eq("id",t).single();if(i||!e)return;u(e.title||"Untitled Quiz");let{data:l}=await n.Z.from("electrical_plan_sets").select("file_url").eq("id",e.plan_set_id).single();o((null==l?void 0:l.file_url)||"");let{data:s}=await n.Z.from("electrical_quiz_questions").select("id, question_text, options, correct_option_index").eq("quiz_id",t);x(s||[])}()},[t]);let handleAnswer=(e,t)=>{m(i=>({...i,[e]:t}))},handleSubmit=async()=>{var e;let i=0;d.forEach(e=>{f[e.id]===e.correct_option_index&&i++});let l=Math.round(i/d.length*100);_(l),h(!0),await n.Z.from("electrical_quiz_results").insert([{quiz_id:t,student_id:null===(e=(await n.Z.auth.getUser()).data.user)||void 0===e?void 0:e.id,score:l}])};return(0,l.jsx)("main",{className:"min-h-screen bg-slate-950 text-white py-10 px-6",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto space-y-10",children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold text-yellow-400",children:["\uD83C\uDF93 ",c]}),i&&(0,l.jsx)("div",{className:"aspect-video",children:(0,l.jsx)("iframe",{src:i,className:"w-full h-full rounded-xl",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),!p&&(0,l.jsxs)("div",{className:"space-y-6",children:[d.map((e,t)=>(0,l.jsxs)("div",{className:"bg-slate-800 p-6 rounded-xl",children:[(0,l.jsxs)("p",{className:"text-lg font-semibold mb-4",children:[t+1,". ",e.question_text]}),(0,l.jsx)("div",{className:"space-y-2",children:e.options.map((t,i)=>(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("input",{type:"radio",name:e.id,value:i,checked:f[e.id]===i,onChange:()=>handleAnswer(e.id,i),className:"mr-2"}),t]},i))})]},e.id)),(0,l.jsx)(r.z,{onClick:handleSubmit,className:"bg-yellow-400 text-black",children:"Submit Quiz"})]}),p&&null!==b&&(0,l.jsxs)("div",{className:"text-2xl font-bold",children:["Your Score: ",b,"%",(0,l.jsx)("p",{className:b>=70?"text-green-400":"text-red-400",children:b>=70?"✅ Passed":"❌ Failed"})]})]})})}},4997:function(e,t,i){"use strict";i.d(t,{z:function(){return r}});var l=i(7437),s=i(2265);function cn(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(" ")}let a={default:"bg-yellow-400 text-black hover:bg-yellow-300",destructive:"bg-red-600 text-white hover:bg-red-500",outline:"border border-white text-white hover:bg-white hover:text-black"},n={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},r=(0,s.forwardRef)((e,t)=>{let{className:i,variant:s="default",size:r="md",...o}=e;return(0,l.jsx)("button",{ref:t,className:cn("inline-flex items-center justify-center font-medium rounded-xl transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",a[s],n[r],i),...o})});r.displayName="Button"},2445:function(e,t,i){"use strict";var l=i(1492);let s=(0,l.eI)("https://your-project-id.supabase.co","your-anon-key");t.Z=s},4033:function(e,t,i){e.exports=i(94)}},function(e){e.O(0,[935,971,472,744],function(){return e(e.s=6661)}),_N_E=e.O()}]);