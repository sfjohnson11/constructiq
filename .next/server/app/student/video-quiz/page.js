(()=>{var e={};e.id=873,e.ids=[873],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>x,tree:()=>u});var r=s(7096),i=s(6132),a=s(7284),n=s.n(a),l=s(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let u=["",{children:["student",{children:["video-quiz",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2133)),"/workspaces/constructiq/app/student/video-quiz/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5345)),"/workspaces/constructiq/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/constructiq/app/student/video-quiz/page.tsx"],d="/student/video-quiz/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/student/video-quiz/page",pathname:"/student/video-quiz",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},459:(e,t,s)=>{Promise.resolve().then(s.bind(s,7349))},7349:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>StudentVideoQuizPage});var r=s(784),i=s(9885),a=s(7114),n=s(6568),l=s(1314);function StudentVideoQuizPage(){let e=(0,a.useSearchParams)(),t=e.get("quizId"),[s,o]=(0,i.useState)(""),[u,c]=(0,i.useState)(""),[d,p]=(0,i.useState)([]),[x,m]=(0,i.useState)({}),[_,q]=(0,i.useState)(!1),[h,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async function(){if(!t)return;let{data:e,error:s}=await n.Z.from("electrical_quizzes").select("*, plan_set_id").eq("id",t).single();if(s||!e)return;c(e.title||"Untitled Quiz");let{data:r}=await n.Z.from("electrical_plan_sets").select("file_url").eq("id",e.plan_set_id).single();o(r?.file_url||"");let{data:i}=await n.Z.from("electrical_quiz_questions").select("id, question_text, options, correct_option_index").eq("quiz_id",t);p(i||[])})()},[t]);let handleAnswer=(e,t)=>{m(s=>({...s,[e]:t}))},handleSubmit=async()=>{let e=0;d.forEach(t=>{x[t.id]===t.correct_option_index&&e++});let s=Math.round(e/d.length*100);g(s),q(!0),await n.Z.from("electrical_quiz_results").insert([{quiz_id:t,student_id:(await n.Z.auth.getUser()).data.user?.id,score:s}])};return r.jsx("main",{className:"min-h-screen bg-slate-950 text-white py-10 px-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-10",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-yellow-400",children:["\uD83C\uDF93 ",u]}),s&&r.jsx("div",{className:"aspect-video",children:r.jsx("iframe",{src:s,className:"w-full h-full rounded-xl",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),!_&&(0,r.jsxs)("div",{className:"space-y-6",children:[d.map((e,t)=>(0,r.jsxs)("div",{className:"bg-slate-800 p-6 rounded-xl",children:[(0,r.jsxs)("p",{className:"text-lg font-semibold mb-4",children:[t+1,". ",e.question_text]}),r.jsx("div",{className:"space-y-2",children:e.options.map((t,s)=>(0,r.jsxs)("label",{className:"block",children:[r.jsx("input",{type:"radio",name:e.id,value:s,checked:x[e.id]===s,onChange:()=>handleAnswer(e.id,s),className:"mr-2"}),t]},s))})]},e.id)),r.jsx(l.z,{onClick:handleSubmit,className:"bg-yellow-400 text-black",children:"Submit Quiz"})]}),_&&null!==h&&(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["Your Score: ",h,"%",r.jsx("p",{className:h>=70?"text-green-400":"text-red-400",children:h>=70?"✅ Passed":"❌ Failed"})]})]})})}},2133:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var r=s(5153);let i=(0,r.createProxy)(String.raw`/workspaces/constructiq/app/student/video-quiz/page.tsx`),{__esModule:a,$$typeof:n}=i,l=i.default,o=l},7114:(e,t,s)=>{e.exports=s(4979)}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[472,891,944,726],()=>__webpack_exec__(9933));module.exports=s})();